# C4 Architecture Documentation Generator
---
name: c4
description: C4モデルで設計書を生成（context/container/component）
---

C4モデルを使用してシステムアーキテクチャの設計書を生成します。

# 使用方法

```bash
# Level 1: システムコンテキスト
/c4 context                              # overview.md + 各システムの詳細を生成
/c4 context <system-name>                # 特定システムの詳細のみ生成

# Level 2: コンテナ図
/c4 container <system-name>              # そのシステムのoverview.md + 各コンテナの詳細を生成
/c4 container <system-name>/<container>  # 特定コンテナの詳細のみ生成

# Level 3: コンポーネント図
/c4 component <system>/<container>                   # そのコンテナのoverview.md + 各コンポーネントの詳細を生成
/c4 component <system>/<container>/<component-name>  # 特定コンポーネントの詳細のみ生成
```

**例**:
```bash
/c4 context                                    # 1-context/overview.md + card-game-system.md + image-gen-system.md
/c4 container card-game-system                 # 2-containers/card-game-system/overview.md + frontend.md + backend.md + database.md
/c4 component card-game-system/backend         # 3-components/card-game-system/backend/overview.md + auth.md + card-management.md + ...
```

# C4モデルガイド

**必須**: まず `docs/architecture/c4-model-guide.md` を読んで、C4モデルの各レベルの定義と粒度を理解してください。

- Level 1, 2, 3 の目的と含まれる要素
- 粒度の判断基準
- Mermaid図の書き方
- 出力ファイル構成

**必須**: examples内の該当する項目を確認して、その記述形式に必ず沿った形でドキュメントを作成してください。

# 出力先

各レイヤーで統一的に「overview.md（全体概要）+ 個別詳細ファイル」の形式を採用します。

```
docs/architecture/c4/
├── 1-context/                        # Level 1: システムコンテキスト
│   ├── overview.md                   # 全システムの俯瞰図とコンテキスト
│   ├── <system-name>.md              # 各システムの詳細説明
│   └── ...
├── 2-containers/                     # Level 2: コンテナ図
│   ├── <system-name>/
│   │   ├── overview.md               # このシステムのコンテナ全体図
│   │   ├── <container-name>.md       # 各コンテナの詳細説明
│   │   └── ...
│   └── ...
└── 3-components/                     # Level 3: コンポーネント図
    └── <system-name>/
        └── <container-name>/
            ├── overview.md           # このコンテナのコンポーネント全体図
            ├── <component-name>.md   # 各コンポーネントの詳細説明
            └── ...
```

**ディレクトリ構造の原則**:
- 各レイヤーで必ず `overview.md` を作成（全体図と俯瞰的説明）
- 個別要素ごとに詳細ファイルを作成（詳細な責務、インターフェース、設計判断）
- 階層構造により、上位レベルから下位レベルへのドリルダウンが可能

# 設計書の要件

## overview.md の要件

overviewファイルは、そのレイヤー全体の俯瞰図と構造を示します：

1. **Mermaid C4図** - レイヤー全体の視覚的な構造表現
2. **概要と目的** - このレイヤーで何を説明するか
3. **主要要素の一覧** - 含まれる要素（システム/コンテナ/コンポーネント）の概要
4. **全体構成の設計判断** - なぜこの構造にしたか
5. **次のステップ** - 詳細ファイルへのリンク

## 個別詳細ファイルの要件

各要素の詳細ファイルには以下を含めます：

1. **責務と役割** - この要素が担う機能と責任範囲
2. **技術スタック** - 使用される技術とその理由（該当する場合）
3. **主要なインターフェース** - 最小限のコード例（5-15行、必要な場合のみ）
4. **設計判断の理由** - なぜこの設計にしたか（重要）
5. **外部との関係** - 他の要素との連携、依存関係

# 注意事項

- CLAUDE.mdの「設計書作成ガイドライン」に従う
- コード例は概念説明のみ（5-15行）
- 完全な実装コードは含めない
- 「なぜ」を重視した説明

---

# 実行

ARGUMENTS: {{ARGUMENTS}}

**手順**:
1. `docs/architecture/c4-model-guide.md` を読む
2. 引数を解析して、レベルと対象を特定
3. 該当するディレクトリ構造を作成
4. **overview.md**（全体図）を生成
5. 各要素の**詳細ファイル**を生成
6. 指定された出力先に保存

**ファイル生成の優先順位**:
- 引数が特定の要素を指定している場合は、その詳細ファイルのみ生成
- 引数がレイヤー全体を指定している場合は、overview.md + 全詳細ファイルを生成
